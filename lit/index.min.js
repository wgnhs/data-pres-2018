!(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit-element"),require("@uirouter/core")):"function"==typeof define&&define.amd?define(["exports","lit-element","@uirouter/core"],t):t((e=e||self).index={},e.common,e.common)})(this,function(e,t,i){"use strict";class r extends t.LitElement{static get properties(){return{title:{type:String},tabs:{type:Array}}}constructor(){super()}static get styles(){return t.css`:host{padding:0 var(--border-radius)}`}switchTab(e){this.shadowRoot.querySelectorAll("slot").forEach(t=>{"default"===e&&!t.getAttribute("name")||t.getAttribute("name")===e?t.hidden=!1:t.hidden=!0})}handleChoiceChange(e){this.switchTab(e.detail.choice)}render(){return t.html`<style>@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);@import url(https://fonts.googleapis.com/icon?family=Material+Icons);body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);background-color:var(--palette-white)}body,h1,h2,h3,h4,h5,p{color:var(--palette-black);font-family:var(--font-family);padding:0;margin:0;box-sizing:border-box}h1,h2,h3,h4,h5{padding:.25em 0 .75em 0;font-weight:var(--font-weight-bold)}h1{font-size:var(--font-size-extra-large);color:var(--palette-accent)}h2{font-size:var(--font-size-large)}p{line-height:1.4em;margin:0 0 1em 0}a{color:var(--palette-900);cursor:pointer;text-decoration-line:underline;text-decoration-style:dashed;text-decoration-color:var(--palette-900)}</style>${this.title?t.html`<h1 class=header>${this.title}</h1>`:""}<slot></slot>${this.tabs?this.tabs.map(e=>t.html`<slot name=${e} hidden></slot>`):""}`}}customElements.define("app-sidebar",r);const s=function(){return"_"+Math.random().toString(36).substr(2,9)},l=["Site_Code","SiteName","Site_Name","Wid","ID"],o={SiteName:{title:"Site Name",desc:""},Site_Name:{title:"Site Name",desc:""},Wid:{title:"WID",desc:""},ID:{title:"ID",desc:""},RecentLog:{title:"Most recent log",desc:""},MaxDepth:{title:"Max depth (ft)",desc:""},Norm_Res:{title:"Normal Resistivity",desc:""},Caliper:{title:"Caliper",desc:""},Gamma:{title:"Natural Gamma",desc:""},SP:{title:"Spontaneous (Self) Potential",desc:""},SPR:{title:"Single Point Resistivity",desc:""},Spec_Gamma:{title:"Spectral Gamma",desc:""},Fluid_Cond:{title:"Fluid Conductivity",desc:""},Flow_Spin:{title:"Spinner Flow Meter",desc:""},Fluid_Temp:{title:"Fluid Temperature",desc:""},Fluid_Res:{title:"Fluid Resistivity",desc:""},OBI:{title:"Optical Borehole Image (OBI)",desc:""},ABI:{title:"Acoustic Borehole Image (ABI)",desc:""},Video:{title:"Video",desc:""},Drill_Year:{title:"Drill year",desc:""},Depth_Ft:{title:"Depth (ft)",desc:""},Drill_Meth:{title:"Drill Method",desc:""},Subsamples:{title:"Subsamples",desc:""},Photos:{title:"Core Photos",desc:""},Grainsize:{title:"Grainsize",desc:""}};let n=window["pdfjs-dist/build/pdf"];const a="toggle-pdf";customElements.define("pdf-view",class extends t.LitElement{static get properties(){return{pdfsrc:{type:String},imgsrc:{type:String}}}buildImgSrc(){if(this.pdfsrc){this.renderRoot;let e=document.createElement("canvas");return n.getDocument(this.pdfsrc).promise.then(function(t){return t.getPage(1).then(function(t){var i=t.getViewport({scale:1}),r=e,s=r.getContext("2d");r.height=i.height,r.width=i.width;var l={canvasContext:s,viewport:i};return t.render(l).promise.then(function(){return e.toDataURL()})})},function(e){console.error(e)})}return Promise.resolve(null)}constructor(){super()}static get styles(){return t.css`div{min-height:10em;display:flex;align-items:center;justify-content:center}img{max-width:45vw}`}render(){return t.html`<div>${this.imgsrc?t.html`<img src=${this.imgsrc}>`:""}</div>`}updated(e){var t=this;e.has("pdfsrc")&&(t.pdfsrc?t.buildImgSrc().then(function(e){t.imgsrc=e}):t.imgsrc=null)}});customElements.define("pdf-view-panel",class extends t.LitElement{static get properties(){return{}}constructor(){super()}static get styles(){return t.css`:host{overflow:auto}div{min-height:10em;display:flex;align-items:center;justify-content:center}`}render(){return t.html`<div><slot></slot></div>`}handleSketchToggle(e){e.detail.closed?this.setAttribute("data-closed",!0):this.removeAttribute("data-closed")}connectedCallback(){super.connectedCallback(),document.addEventListener(a,this.handleSketchToggle.bind(this))}disconnectedCallback(){document.removeEventListener(a,this.handleSketchToggle.bind(this)),super.disconnectedCallback()}});customElements.define("pdf-view-button",class extends t.LitElement{static get properties(){return{buttonText:{type:String,attribute:"button-text"},closedText:{type:String,attribute:"closed-text"},openedText:{type:String,attribute:"opened-text"}}}constructor(){super(),this.closed=!0}static get styles(){return t.css``}render(){return t.html`<button @click=${this.toggle}>${this.buttonText}</button>`}firstUpdated(){this.closedText&&this.openedText?this.buttonText=this.closed?this.closedText:this.openedText:this.buttonText||(this.buttonText="toggle")}toggle(){this.closed=!this.closed,this.closedText&&this.openedText&&(this.buttonText=this.closed?this.closedText:this.openedText),this.dispatchEvent(new CustomEvent(a,{bubbles:!0,detail:{closed:this.closed}}))}});class d extends t.LitElement{static get properties(){return{siteinfo:{type:Object}}}constructor(){super(),this.genId=(function(){const e={};return function(t){return e[t]||(e[t]=s()),e[t]}})()}static get styles(){return t.css`[data-element=table]{display:grid;grid-template-columns:30% 1fr;grid-gap:.5em;width:100%}td{padding:.5em}.label{background-color:var(--palette-dark);font-weight:var(--font-weight-bold)}.detail{background-color:var(--palette-light)}.header{position:-webkit-sticky;position:sticky;top:0;background-color:var(--palette-white);padding:var(--font-size-extra-large);z-index:10;width:100%;box-sizing:border-box;display:flex;justify-content:space-between}.header h1{padding:0;max-width:70%;text-align:center}.header i{font-size:var(--icon-size-large);color:var(--palette-accent);cursor:pointer}[data-closed]{display:none}`}get renderTable(){return Object.entries(this.siteinfo).filter((e,t)=>!l.includes(e[0])).map((e,i)=>t.html`<td class=label title=${o[e[0]]?o[e[0]].desc:e[0]}><label for=${this.genId(i)}>${o[e[0]]?o[e[0]].title:e[0]}</label></td><td class=detail title=${o[e[0]]?o[e[0]].desc:e[0]}><span id=${this.genId(i)}>${e[1]}</span></td>`)}render(){return t.html`<style>@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);@import url(https://fonts.googleapis.com/icon?family=Material+Icons);body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);background-color:var(--palette-white)}body,h1,h2,h3,h4,h5,p{color:var(--palette-black);font-family:var(--font-family);padding:0;margin:0;box-sizing:border-box}h1,h2,h3,h4,h5{padding:.25em 0 .75em 0;font-weight:var(--font-weight-bold)}h1{font-size:var(--font-size-extra-large);color:var(--palette-accent)}h2{font-size:var(--font-size-large)}p{line-height:1.4em;margin:0 0 1em 0}a{color:var(--palette-900);cursor:pointer;text-decoration-line:underline;text-decoration-style:dashed;text-decoration-color:var(--palette-900)}</style>${this.siteinfo?t.html`<div class=header><span><a href=${window.router.link("entry")} onclick=event.preventDefault()><i class="material-icons clear-selection" title="Clear selection" @click=${this.fireClearSelection}>arrow_back</i></a> </span>${this.siteinfo.Wid?t.html`<h1>${this.siteinfo.Wid}: ${this.siteinfo.SiteName}</h1>`:""} ${this.siteinfo.ID?t.html`<h1>${this.siteinfo.ID}: ${this.siteinfo.Site_Name}</h1>`:""} <span></span></div><div data-element=table>${this.renderTable}</div><slot name=sketch></slot>`:""}`}fireClearSelection(){let e=new CustomEvent("clear-selection",{bubbles:!0,detail:{}});this.dispatchEvent(e)}}customElements.define("site-details",d);customElements.define("app-collapsible",class extends t.LitElement{static get properties(){return{genId:{type:String,attribute:!1},open:{type:Boolean}}}constructor(){super(),this.genId=s()}static get styles(){return t.css`.wrap-collapsible{margin:var(--border-radius) 0}input[type=checkbox]{display:none}.lbl-toggle{display:block;font-weight:var(--font-weight-bold);font-size:var(--font-size-extra-large);text-align:center;padding:var(--border-radius);color:var(--palette-accent);background:var(--palette-light);cursor:pointer;border-radius:var(--border-radius);transition:all .3s cubic-bezier(.755,.05,.855,.06)}.lbl-toggle:hover{color:var(--palette-900)}.lbl-toggle:focus{outline:thin dotted}.collapsible-content{max-height:0;overflow:hidden;transition:max-height .3s cubic-bezier(.86,0,.07,1)}.toggle:checked+.lbl-toggle+.collapsible-content{max-height:var(--collapsible-max-height,3000px)}.toggle:checked+.lbl-toggle{border-bottom-right-radius:0;border-bottom-left-radius:0}.collapsible-content .content-inner{background:var(--palette-white);border-bottom:1px solid var(--palette-light);border-right:1px solid var(--palette-light);border-left:1px solid var(--palette-light);border-bottom-left-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);padding:var(--font-size)}.collapsible-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between}`}render(){return t.html`<div class=wrap-collapsible><input id=${this.genId} class=toggle type=checkbox ?checked=${this.open}> <label for=${this.genId} class=lbl-toggle tabindex=0><div class=collapsible-header><div><slot name=header-before></slot></div><div><slot name=header></slot></div><div><slot name=header-after></slot></div></div></label><div class=collapsible-content><div class=content-inner><slot name=content></slot></div></div></div>`}firstUpdated(){let e=this.renderRoot.querySelectorAll(".lbl-toggle");Array.from(e).forEach(e=>{e.addEventListener("keydown",t=>{32!==t.which&&13!==t.which||(t.preventDefault(),e.click())})})}});customElements.define("in-radio",class extends t.LitElement{static get properties(){return{inName:{type:String,attribute:"in-name"},choices:{type:Array},choice:{type:String,reflect:!0}}}constructor(){super(),this.checked=[],this.genId=(function(){const e={};return function(t){return e[t]||(e[t]=s()),e[t]}})()}firstUpdated(){!this.choice&&this.choices&&(this.choice=this.choices[0])}inChange(e){this.choice=e.target.value;let t=new CustomEvent("choice-change",{detail:{choice:this.choice}});this.dispatchEvent(t)}render(){return t.html`${this.choices.map((e,i)=>t.html`<div class=choice><input type=radio name=${this.inName} id=${this.genId(i)} value=${e} .checked=${this.choice===e} @change=${this.inChange}> <label for=${this.genId(i)}>${e}</label></div>`)}`}});class c extends t.LitElement{static get properties(){return{filter:{type:Array,attribute:!1},matchClass:{type:String,attribute:!1}}}static get styles(){return t.css`display .field{display:grid;grid-template-columns:40% 1fr;grid-gap:var(--border-radius);margin:0 var(--border-radius)}.label{font-weight:var(--font-weight-bold)}.section-title{margin:var(--line-height) 0 0 0;padding:var(--border-radius);background-color:var(--palette-light)}in-radio{display:inline-grid;grid-template-columns:auto auto}`}updateMatchClass(e){this.matchClass=e.target.choice}render(){return t.html`<style>@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);@import url(https://fonts.googleapis.com/icon?family=Material+Icons);body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);background-color:var(--palette-white)}body,h1,h2,h3,h4,h5,p{color:var(--palette-black);font-family:var(--font-family);padding:0;margin:0;box-sizing:border-box}h1,h2,h3,h4,h5{padding:.25em 0 .75em 0;font-weight:var(--font-weight-bold)}h1{font-size:var(--font-size-extra-large);color:var(--palette-accent)}h2{font-size:var(--font-size-large)}p{line-height:1.4em;margin:0 0 1em 0}a{color:var(--palette-900);cursor:pointer;text-decoration-line:underline;text-decoration-style:dashed;text-decoration-color:var(--palette-900)}</style><div>Show sites that have<in-radio choices='["ANY", "ALL"]' @choice-change=${this.updateMatchClass}></in-radio>of the following:</div><div>${this.renderFilterSections()}</div>`}resolveKeyLookup(e){return o[e]?o[e].title:e}renderFilterSections(){return this.filterSections.map(e=>t.html`<app-collapsible open><i slot=header-before class=material-icons>expand_more</i> <span slot=header>${e.title}</span><div slot=content>${e.sections.map((e,i)=>t.html`${e.title?t.html`<h2 class=section-title>${e.title}</h2>`:""} ${Object.entries(e.fields).map((e,i)=>t.html`<div class=field>${0===e[1].controls.length?"":e[1].controls.map(r=>t.html`<td class=label><label for=${this.genId(i)}>${this.resolveKeyLookup(e[0])}</label></td><td class=selector @change=${r.handle.bind(r)}><input id=${r.id} type=checkbox name=${e[0]}> ${r.next}</td>`)}</div>`)}`)}</div></app-collapsible>`)}updated(){let e=this.matchClass,t=this.filter;window.siteMap&&window.siteMap.map.fire("filterpoints",{detail:{resolve:function(i){let r=t.length<1;return r||(r="ALL"===e?t.reduce((e,t)=>e&&t.resolve(i),!0):t.reduce((e,t)=>e||t.resolve(i),!1)),r}}})}constructor(){super(),this.genId=(function(){const e={};return function(t){return e[t]||(e[t]=s()),e[t]}})(),this.filter=[],this.filterSections=[{title:"Site Information",sections:[{fields:{County:{controls:[new u(this,"County")]},SiteName:{controls:[new f(this)]},Site_Name:{controls:[new f(this)]},Wid:{controls:[new g(this)]}}}]},{title:"Geophysical Logs",sections:[{fields:{RecentLog:{controls:[new p(this,!0)]},MaxDepth:{controls:[new p(this)]}}},{title:"Geologic",fields:{Norm_Res:{controls:[new h(this)]},Caliper:{controls:[new h(this)]},Gamma:{controls:[new h(this)]},SP:{controls:[new h(this)]},SPR:{controls:[new h(this)]},Spec_Gamma:{controls:[new h(this)]}}},{title:"Hydrogeologic",fields:{Fluid_Cond:{controls:[new h(this)]},Flow_Spin:{controls:[new h(this)]},Fluid_Temp:{controls:[new h(this)]},Fluid_Res:{controls:[new h(this)]},Flow_HP:{controls:[new h(this)]}}},{title:"Image",fields:{OBI:{controls:[new h(this)]},ABI:{controls:[new h(this)]},Video:{controls:[new h(this)]}}}]},{title:"Quaternary Core Data",sections:[{fields:{Drill_Year:{controls:[new p(this,!0)]},Depth_Ft:{controls:[new p(this)]},Drill_Meth:{controls:[new u(this,"Drill_Meth")]}}},{title:"Analyses available",fields:{Subsamples:{controls:[new h(this)]},Photos:{controls:[new h(this)]},Grainsize:{controls:[new h(this)]}}}]}]}}customElements.define("map-filter",c);class h{constructor(e){this.id=s(),this.filter=e.filter,this.postHandle=e.requestUpdate.bind(e)}handle(e){let t=this.id,i={};i.target=e.currentTarget.querySelector("#"+t),i.prop=e.target.name;for(var r=this.filter.findIndex(e=>e.id===t);r>=0;r=this.filter.findIndex(e=>e.id===t))this.filter.splice(r,1);i.target.checked&&this.filter.push({id:t,resolve:function(e){return!!e[i.prop]}}),this.postHandle()}}class p{constructor(e,t){this.id=s(),this.filter=e.filter,this.postHandle=e.requestUpdate.bind(e),this.gtName=t?"after":"at least",this.ltName=t?"before":"less than"}get next(){return t.html`<select><option value=gt>${this.gtName}</option><option value=lt>${this.ltName}</option></select> <input type=text>`}handle(e){let t=this.id,i={};i.target=e.currentTarget.querySelector("#"+t),i.prop=i.target.name,i.gt=((e,t)=>e>=t),i.lt=((e,t)=>e<t);for(var r=this.filter.findIndex(e=>e.id===t);r>=0;r=this.filter.findIndex(e=>e.id===t))this.filter.splice(r,1);i.target.checked&&this.filter.push({id:t,resolve:function(e){let t=!!e[i.prop];return t&&(t=i[i.target.nextElementSibling.value](e[i.prop],i.target.nextElementSibling.nextElementSibling.value)),t}}),this.postHandle()}}class u{constructor(e){this.id=s(),this.filter=e.filter,this.postHandle=e.requestUpdate.bind(e)}get next(){return t.html`<select ?disabled=${!this.options}><option></option>${this.options?this.options.map(e=>t.html`<option value=${e}>${e}</option>`):""}</select>`}handle(e){let t=this.id,i={};i.target=e.currentTarget.querySelector("#"+t),i.prop=i.target.name,this.options||(this.options=Array.from(Object.entries(window.siteMap.map._layers).reduce((e,t)=>t[1].feature&&t[1].feature.properties[i.prop]?e.add(t[1].feature.properties[i.prop]):e,new Set)).sort());for(var r=this.filter.findIndex(e=>e.id===t);r>=0;r=this.filter.findIndex(e=>e.id===t))this.filter.splice(r,1);i.target.checked&&this.filter.push({id:t,resolve:function(e){let t=!!e[i.prop];return t&&(t=!i.target.nextElementSibling.value||e[i.prop]===i.target.nextElementSibling.value),t}}),this.postHandle()}}class g{constructor(e){this.id=s(),this.filter=e.filter,this.postHandle=e.requestUpdate.bind(e)}get next(){return t.html`<input type=text>`}handle(e){let t=this.id,i={};i.target=e.currentTarget.querySelector("#"+t),i.prop=i.target.name;for(var r=this.filter.findIndex(e=>e.id===t);r>=0;r=this.filter.findIndex(e=>e.id===t))this.filter.splice(r,1);i.target.checked&&this.filter.push({id:t,resolve:function(e){let t=!!e[i.prop];return t&&(t=!i.target.nextElementSibling.value||e[i.prop]==i.target.nextElementSibling.value),t}}),this.postHandle()}}class f{constructor(e){this.id=s(),this.filter=e.filter,this.postHandle=e.requestUpdate.bind(e)}get next(){return t.html`<input type=text>`}handle(e){let t=this.id,i={};i.target=e.currentTarget.querySelector("#"+t),i.prop=i.target.name;for(var r=this.filter.findIndex(e=>e.id===t);r>=0;r=this.filter.findIndex(e=>e.id===t))this.filter.splice(r,1);i.target.checked&&this.filter.push({id:t,resolve:function(e){let t=!!e[i.prop];if(t){let r=i.target.nextElementSibling.value;if(r){let s=r.trim().toUpperCase();t=e[i.prop].toUpperCase().includes(s)}}return t}}),this.postHandle()}}e.AppSidebar=r,e.MapFilter=c,e.SiteDetails=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
